{% extends 'base.html.twig' %}
{% block header %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="{{ asset('bundles/starrating/css/rating.css') }}"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}
{% block content %}



    <!-- Section Area - Content Central -->
    <section class="content-info">

        <div class="container paddings-mini">
            <div class="row">

                <!-- Sidebars -->
                <aside class="col-lg-3">

                    <!-- Widget Text-->
                    <div class="panel-box">
                        <div class="titles no-margin">
                            <h4>Avis de notre client√®le</h4>
                        </div>
                        <div class="info-panel">
                            <p>
                                <strong> Ambiance:</strong><br>
                                {% for AvisAmbiance in AvisAmbiance %}
                                    {{ AvisAmbiance|rating }}
                                {% endfor %}
                            </p>
                            <p>
                                <strong> Accueil:</strong><br>
                                {% for AvisAccueil in AvisAccueil %}
                                    {{ AvisAccueil|rating }}
                                {% endfor %}
                            </p>

                            <p>
                                <strong> Qualite/prix:</strong><br>
                                {% for AvisRQP in AvisRQP %}
                                    {{ AvisRQP|rating }}
                                {% endfor %}
                            </p>

                            <p>
                                <strong> Cuisine:</strong><br>
                                {% for AvisCuisine in AvisCuisine %}
                                    {{ AvisCuisine|rating }}
                                {% endfor %}
                            </p>

                        </div>

                    </div>

                    <!-- Widget Text-->
                    <div class="panel-box">
                        <div class="titles no-margin">
                            <h4>Contact</h4>
                        </div>
                        <div class="info-panel">
                            <p>
                                <i class="fa  fa-envelope" style="font-size: 19pt;"></i><a
                                        href="mailto:#">   {{ commodite.email }}</a><br>
                            </p>
                            <p>
                                <i class="fa  fa-mobile-phone" style="font-size: 35pt;"></i> {{ commodite.tel }}<br>
                            </p>

                            <p>
                                <i class="fa  fa-map" style="font-size: 19pt;"></i> {{ commodite.adresse }}</a><br>
                            </p>

                            <p>
                                <i class="fa  fa-map-marker" style="font-size: 28pt;"></i><strong>
                                    ville:</strong>   {{ commodite.ville }}</a><br>
                            </p>
                        </div>
                    </div>
                    <!-- End Widget Text-->
                    <!-- Widget img-->
                    <div class="panel-box">
                        <div class="titles no-margin">
                            <h4>Informations de Plus </h4>
                        </div>
                        <div class="info-panel">
                            <p>
                                <i class="fa fa-beer" style="font-size: 19pt;"></i>
                                {% if commodite.alcool==1 %}
                                    <strong style="margin-left: 4%;"> Sert l'alcool</strong><br>
                                {% else %}
                                    <strong style="margin-left: 4%;"> Ne sert pas l'alcool</strong><br>
                                {% endif %}
                            </p>
                            <p>
                                <i class="fa fa-ticket" style="font-size: 19pt;"></i>
                                {% if commodite.ticketRestaurant==1 %}
                                    <strong style="    margin-left: 3%;"> Accepte les Tickets Resto</strong><br>
                                {% else %}
                                    <strong style="    margin-left: 3%;"> N'accepte pas les tickets resto</strong><br>
                                {% endif %}
                            </p>

                            <p>
                                <i class="fa fa-cc-mastercard" style="font-size: 19pt;"></i>
                                {% if commodite.carteCredit==1 %}
                                    <strong> Paiement avec carte credit</strong><br>
                                {% else %}
                                    <strong> Paiement avec carte credit</strong><br>
                                {% endif %}
                            </p>
                            <p>
                                <i class="fa fa-wifi" style="font-size: 19pt;"></i>
                                {% if commodite.wifiGratuit==1 %}
                                    <strong> Free Wi-Fi</strong><br>
                                {% else %}
                                    <strong> Pas de connexion Wi-Fi</strong><br>
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    <!-- End Widget img-->

                    <!-- Widget img-->
                    <div class="panel-box">
                        <div class="titles no-margin">
                            <h4>Map </h4>

                            <img src="{{ asset('uploads/images/maps.PNG') }}" alt="">
                            <a class="btn btn-primary" href="#map" style="margin-top: 5%;margin-left: 23%;">Voir
                                Localisation</a>


                        </div>
                    </div>
                    <!-- End Widget img-->
                </aside>
                <!-- End Sidebars -->

                <!-- End Sidebars -->


                <div class="col-lg-8">
                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner">
                            {% for key, co in galeriecommodite %}
                                <div {% if key==0 %} class="carousel-item active" {% else %} class="carousel-item" {% endif %}>
                                    <img src="{{ asset('uploads/images/' ~ co.name ) }}" alt=""
                                         style="height: 500px; width: 1100px">
                                </div>
                            {% endfor %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls" role="button"
                           data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls" role="button"
                           data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>


                    <!-- Content Text-->
                    <div class="panel-box">
                        <div class="titles no-margin">

                            <h4> {{ commodite.nomCommodite }}  </h4>

                        </div>
                        <img src="img/locations/1.jpg" alt="">
                        <div class="info-panel">
                            <h5>Description</h5>

                            <p>{{ commodite.Description }}</p>

                        </div>
                    </div>
                    <!-- End Content Text-->


                    <!-- Comments -->
                    <div class="panel-box">
                        <!-- Title Post -->
                        <div class="titles">
                            <h4>Comments</h4>
                        </div>
                        <!-- Title Post -->

                        <ul class="testimonials">
                            <li>

                                {% for feedbackx in feedback %}

                                    <blockquote>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label> Rate Acceuil*</label>
                                                {{ feedbackx.rateAcceuil|rating }}
                                            </div>

                                            <div class="col-md-6">
                                                <label> Rate Qualite/Prix *</label>
                                                {{ feedbackx.rateRqp|rating }}
                                            </div>
                                            <div class="col-md-6">
                                                <label> Rate Cuisine *</label>
                                                {{ feedbackx.rateCuisine|rating }}
                                            </div>

                                            <div class="col-md-6">
                                                <label> Rate Ambiance *</label>
                                                {{ feedbackx.rateAmbiance|rating }}
                                            </div>
                                        </div>
                                        {% if feedbackx.contenu is not null %}
                                            <p>{{ feedbackx.contenu }}</p>
                                        {% endif %}
                                        {{ feedbackx.dateCommentaire | date }}
                                        {#<strong>{{ app.getUser().getNom()}} {{ app.getUser().getPrenom() }}</strong>#}
                                        <strong>{{ feedbackx.idUser.nom }} {{ feedbackx.idUser.prenom }}</strong>
                                        {% if (is_granted('IS_AUTHENTICATED_FULLY') and (app.user.id==feedbackx.idUser.id)) %}
                                            <a href="{{ url('feedbackfront_delete',{'idFeedback':feedbackx.idFeedback,'idCommodite':feedbackx.idCommodite.idCommodite}) }}">
                                                Supprimer </a>
                                        {% endif %}

                                        {% if (is_granted('IS_AUTHENTICATED_FULLY')and (app.user.id==feedbackx.idUser.id) ) %}
                                            <a href="{{ url('feedbackfront_update',{'idFeedback':feedbackx.idFeedback,'idCommodite':feedbackx.idCommodite.idCommodite}) }}"
                                            > Modifier </a>
                                        {% endif %}
                                    </blockquote>

                                    <hr>
                                {% endfor %}
                            </li>
                        </ul>
                    </div>
                    <!-- End Comments -->

                    <!-- Comment Form -->
                    {% if nbMyFeedback == 0 %}

                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                            Commenter
                        </button>
                        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                             aria-labelledby="exampleModalLabel" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="panel-box padding-b" id="avis">
                                        <!-- Title Post -->
                                        <div class="titles">
                                            <h4>Publish Commnet</h4>
                                        </div>

                                        <div class="info-panel">

                                            <!-- Form coment -->
                                            {{ form_start(form) }}


                                            <form class="form-theme">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <label> Rate Qualite/Prix *</label>
                                                        {{ form_widget(form.rateRqp) }}

                                                    </div>
                                                    <div class="col-md-6">
                                                        <label> Rate Acceuil *</label>
                                                        {{ form_widget(form.rateAcceuil) }}

                                                    </div>

                                                    <div class="col-md-6">
                                                        <label> Rate Cuisine *</label>
                                                        {{ form_widget(form.rateCuisine) }}
                                                    </div>

                                                    <div class="col-md-6">
                                                        <label> Rate Ambiance *</label>
                                                        {{ form_widget(form.rateAmbiance) }}

                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-md-12">
                                                        <label>Comment *
                                                        </label>
                                                        {{ form_widget(form.contenu , {'attr':{'class' :'form-control', 'name':'name' ,'id':'name' ,' type': 'text/css', 'hight':'100%' }}) }}

                                                        </textarea>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-offset-4">
                                                        <div class="modal-footer">
                                                            {{ form_widget(form.Publier,{'attr':{'class':'btn btn-primary'}}) }}
                                                            <button type="button" class="btn btn-secondary"
                                                                    data-dismiss="modal">
                                                                Close
                                                            </button>
                                                        </div>
                                                        {{ form_end(form) }}
                                                    </div>
                                                </div>
                                            </form>
                                            <!-- End Form coment -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                    <!-- End Comment Form -->
                </div>
                <div class="col-lg-1">
                    {% if like == 0 %}
                        <a href="{{ path('feedbackfront_like',{'id':commodite.idCommodite } ) }}"><img
                                    src="{{ asset('uploads/thumbs-up-circle-blue-512.png') }}"></a>
                    {% else %}
                        <a href="{{ path('feedbackfront_dislike',{'id': commodite.idCommodite }) }}"><img
                                    src="{{ asset('uploads/favourite512x512.png') }}"></a>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Newsletter -->
        <div id="map" style="width: 100%;height: 400px;background-color: grey;"></div>
        <!-- End Newsletter -->
    </section>
    <!-- End Section Area -  Content Central -->
    <script>
        function initMap() {
            var uluru = {lat: {{ commodite.lat }}, lng: {{ commodite.lng }}};
            var nom = '{{ commodite.nomCommodite }}'
            var adresse = '{{ commodite.adresse  }}'
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: uluru
            });
            var contentString = '<div id="content">' +
                '<div id="siteNotice">' +
                '</div>' +
                '<h1 id="firstHeading" class="firstHeading">' + nom + '</h1>' +
                '<div id="bodyContent">' +
                adresse +
                '</div>' +
                '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentString
            });
            var marker = new google.maps.Marker({
                position: uluru,
                map: map,
                title: 'Hello World!'
            });
            marker.addListener('click', function () {
                infowindow.open(map, marker);
            });
            google.maps.event.addListener(map, "click", function (e) {

                //lat and lng is available in e object
                var latLng = e.latLng;
                console.log(latLng.lat());
                console.log(latLng.lng());

            });
        }
    </script>
    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANA29xt7tok9V7EyeeLhegCsDyv0XmxSc&callback=initMap">
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script src="{{ asset('bundles/starrating/js/rating.js') }}"></script>
{% endblock %}
{% block footer %}
    {{ parent() }}
{% endblock %}